"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/preview";
exports.ids = ["pages/api/preview"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "playwright":
/*!*****************************!*\
  !*** external "playwright" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("playwright");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpreview&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpreview.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpreview&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpreview.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_preview_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/preview.js */ \"(api)/./pages/api/preview.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_preview_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_preview_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/preview\",\n        pathname: \"/api/preview\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_preview_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnByZXZpZXcmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnByZXZpZXcuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDbUQ7QUFDbkQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGtEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxrREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3R1ZGlvLXdlYi8/NDMxMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL3ByZXZpZXcuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcmV2aWV3XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJldmlld1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpreview&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpreview.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/scrapeTiktok.js":
/*!*****************************!*\
  !*** ./lib/scrapeTiktok.js ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { chromium } = __webpack_require__(/*! playwright */ \"playwright\");\nconst fs = __webpack_require__(/*! fs */ \"fs\");\nasync function scrapeTiktokProfile(username, startDate, endDate) {\n    const browser = await chromium.launch({\n        headless: true\n    });\n    const context = await browser.newContext();\n    // Coba load cookies kalau ada\n    if (fs.existsSync(\"tiktok-cookies.json\")) {\n        const cookies = JSON.parse(fs.readFileSync(\"tiktok-cookies.json\"));\n        await context.addCookies(cookies);\n        console.log(\"\\uD83C\\uDF6A Cookies loaded!\");\n    }\n    const page = await context.newPage();\n    const profileUrl = `https://www.tiktok.com/@${username}`;\n    try {\n        await page.goto(profileUrl, {\n            waitUntil: \"networkidle\"\n        });\n        await page.waitForSelector(\"h1\");\n        const usernameText = await page.$eval(\"h1\", (el)=>el.innerText);\n        const avatar = await page.$eval('img[src*=\"tiktok\"]', (img)=>img.src);\n        const videoLinks = new Set();\n        let prevHeight = 0;\n        while(true){\n            const links = await page.$$eval('a[href*=\"/video/\"]', (as)=>as.map((a)=>a.href));\n            links.forEach((link)=>videoLinks.add(link));\n            const height = await page.evaluate(()=>{\n                window.scrollTo(0, document.body.scrollHeight);\n                return document.body.scrollHeight;\n            });\n            if (height === prevHeight) break;\n            prevHeight = height;\n            await page.waitForTimeout(3000);\n        }\n        const start = new Date(startDate).getTime();\n        const end = new Date(endDate).getTime();\n        const videos = [];\n        console.log(`🔗 Total link ditemukan: ${videoLinks.size}`);\n        for (const link of videoLinks){\n            const vid = await context.newPage();\n            try {\n                await vid.goto(link, {\n                    waitUntil: \"domcontentloaded\"\n                });\n                const jsonData = await vid.evaluate(()=>{\n                    const script = [\n                        ...document.querySelectorAll(\"script\")\n                    ].find((s)=>s.textContent.includes(\"__UNIVERSAL_DATA__\"));\n                    if (!script) return null;\n                    const match = script.textContent.match(/window\\.__UNIVERSAL_DATA__\\s*=\\s*({.*});/);\n                    if (!match) return null;\n                    const data = JSON.parse(match[1]);\n                    return data?.SEOState?.itemList?.[0] || null;\n                });\n                if (!jsonData || !jsonData.createTime) {\n                    console.warn(\"❌ Gagal ambil videoData:\", link);\n                    await vid.close();\n                    continue;\n                }\n                const time = jsonData.createTime * 1000;\n                if (time >= start && time <= end) {\n                    videos.push({\n                        url: link,\n                        uploadDate: new Date(time).toISOString(),\n                        description: jsonData.desc || \"\",\n                        thumbnail: jsonData.cover || \"\"\n                    });\n                }\n            } catch (err) {\n                console.warn(\"❌ Error fetch video:\", link, err.message);\n            } finally{\n                await vid.close();\n            }\n        }\n        await browser.close();\n        console.log(`📂 Total video valid: ${videos.length}`);\n        videos.forEach((v, i)=>{\n            console.log(`🎬 [${i + 1}] ${v.uploadDate} — ${v.url}`);\n        });\n        return {\n            username: usernameText,\n            avatar,\n            total: videos.length,\n            estSize: `${videos.length * 5} MB`,\n            videos\n        };\n    } catch (err) {\n        await browser.close();\n        console.error(\"❌ Scraper error:\", err.message);\n        throw new Error(\"Gagal mengambil data dari TikTok\");\n    }\n}\nmodule.exports = {\n    scrapeTiktokProfile\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLG9CQUFvQlAsSUFBSUMsT0FBTztRQUM3QyxNQUFNLElBQUlPLE1BQU07SUFDbEI7QUFDRjtBQUVBQyxPQUFPQyxPQUFPLEdBQUc7SUFBRTFGO0FBQW9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3N0dWRpby13ZWIvLi9saWIvc2NyYXBlVGlrdG9rLmpzPzU0YzIiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBjaHJvbWl1bSB9ID0gcmVxdWlyZSgncGxheXdyaWdodCcpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5hc3luYyBmdW5jdGlvbiBzY3JhcGVUaWt0b2tQcm9maWxlKHVzZXJuYW1lLCBzdGFydERhdGUsIGVuZERhdGUpIHtcbiAgY29uc3QgYnJvd3NlciA9IGF3YWl0IGNocm9taXVtLmxhdW5jaCh7IGhlYWRsZXNzOiB0cnVlIH0pO1xuICBjb25zdCBjb250ZXh0ID0gYXdhaXQgYnJvd3Nlci5uZXdDb250ZXh0KCk7XG5cbiAgLy8gQ29iYSBsb2FkIGNvb2tpZXMga2FsYXUgYWRhXG4gIGlmIChmcy5leGlzdHNTeW5jKCd0aWt0b2stY29va2llcy5qc29uJykpIHtcbiAgICBjb25zdCBjb29raWVzID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoJ3Rpa3Rvay1jb29raWVzLmpzb24nKSk7XG4gICAgYXdhaXQgY29udGV4dC5hZGRDb29raWVzKGNvb2tpZXMpO1xuICAgIGNvbnNvbGUubG9nKCfwn42qIENvb2tpZXMgbG9hZGVkIScpO1xuICB9XG5cbiAgY29uc3QgcGFnZSA9IGF3YWl0IGNvbnRleHQubmV3UGFnZSgpO1xuICBjb25zdCBwcm9maWxlVXJsID0gYGh0dHBzOi8vd3d3LnRpa3Rvay5jb20vQCR7dXNlcm5hbWV9YDtcblxuICB0cnkge1xuICAgIGF3YWl0IHBhZ2UuZ290byhwcm9maWxlVXJsLCB7IHdhaXRVbnRpbDogJ25ldHdvcmtpZGxlJyB9KTtcblxuICAgIGF3YWl0IHBhZ2Uud2FpdEZvclNlbGVjdG9yKCdoMScpO1xuICAgIGNvbnN0IHVzZXJuYW1lVGV4dCA9IGF3YWl0IHBhZ2UuJGV2YWwoJ2gxJywgZWwgPT4gZWwuaW5uZXJUZXh0KTtcbiAgICBjb25zdCBhdmF0YXIgPSBhd2FpdCBwYWdlLiRldmFsKCdpbWdbc3JjKj1cInRpa3Rva1wiXScsIGltZyA9PiBpbWcuc3JjKTtcblxuICAgIGNvbnN0IHZpZGVvTGlua3MgPSBuZXcgU2V0KCk7XG4gICAgbGV0IHByZXZIZWlnaHQgPSAwO1xuXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGNvbnN0IGxpbmtzID0gYXdhaXQgcGFnZS4kJGV2YWwoJ2FbaHJlZio9XCIvdmlkZW8vXCJdJywgYXMgPT5cbiAgICAgICAgYXMubWFwKGEgPT4gYS5ocmVmKVxuICAgICAgKTtcbiAgICAgIGxpbmtzLmZvckVhY2gobGluayA9PiB2aWRlb0xpbmtzLmFkZChsaW5rKSk7XG5cbiAgICAgIGNvbnN0IGhlaWdodCA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQpO1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGhlaWdodCA9PT0gcHJldkhlaWdodCkgYnJlYWs7XG4gICAgICBwcmV2SGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgYXdhaXQgcGFnZS53YWl0Rm9yVGltZW91dCgzMDAwKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSkuZ2V0VGltZSgpO1xuICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKGVuZERhdGUpLmdldFRpbWUoKTtcbiAgICBjb25zdCB2aWRlb3MgPSBbXTtcblxuICAgIGNvbnNvbGUubG9nKGDwn5SXIFRvdGFsIGxpbmsgZGl0ZW11a2FuOiAke3ZpZGVvTGlua3Muc2l6ZX1gKTtcblxuICAgIGZvciAoY29uc3QgbGluayBvZiB2aWRlb0xpbmtzKSB7XG4gICAgICBjb25zdCB2aWQgPSBhd2FpdCBjb250ZXh0Lm5ld1BhZ2UoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHZpZC5nb3RvKGxpbmssIHsgd2FpdFVudGlsOiAnZG9tY29udGVudGxvYWRlZCcgfSk7XG5cbiAgICAgICAgY29uc3QganNvbkRhdGEgPSBhd2FpdCB2aWQuZXZhbHVhdGUoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHNjcmlwdCA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnKV1cbiAgICAgICAgICAgIC5maW5kKHMgPT4gcy50ZXh0Q29udGVudC5pbmNsdWRlcygnX19VTklWRVJTQUxfREFUQV9fJykpO1xuICAgICAgICAgIGlmICghc2NyaXB0KSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNvbnN0IG1hdGNoID0gc2NyaXB0LnRleHRDb250ZW50Lm1hdGNoKC93aW5kb3dcXC5fX1VOSVZFUlNBTF9EQVRBX19cXHMqPVxccyooey4qfSk7Lyk7XG4gICAgICAgICAgaWYgKCFtYXRjaCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShtYXRjaFsxXSk7XG4gICAgICAgICAgcmV0dXJuIGRhdGE/LlNFT1N0YXRlPy5pdGVtTGlzdD8uWzBdIHx8IG51bGw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghanNvbkRhdGEgfHwgIWpzb25EYXRhLmNyZWF0ZVRpbWUpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ+KdjCBHYWdhbCBhbWJpbCB2aWRlb0RhdGE6JywgbGluayk7XG4gICAgICAgICAgYXdhaXQgdmlkLmNsb3NlKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0aW1lID0ganNvbkRhdGEuY3JlYXRlVGltZSAqIDEwMDA7XG4gICAgICAgIGlmICh0aW1lID49IHN0YXJ0ICYmIHRpbWUgPD0gZW5kKSB7XG4gICAgICAgICAgdmlkZW9zLnB1c2goe1xuICAgICAgICAgICAgdXJsOiBsaW5rLFxuICAgICAgICAgICAgdXBsb2FkRGF0ZTogbmV3IERhdGUodGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBqc29uRGF0YS5kZXNjIHx8ICcnLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiBqc29uRGF0YS5jb3ZlciB8fCAnJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybign4p2MIEVycm9yIGZldGNoIHZpZGVvOicsIGxpbmssIGVyci5tZXNzYWdlKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGF3YWl0IHZpZC5jbG9zZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IGJyb3dzZXIuY2xvc2UoKTtcblxuICAgIGNvbnNvbGUubG9nKGDwn5OCIFRvdGFsIHZpZGVvIHZhbGlkOiAke3ZpZGVvcy5sZW5ndGh9YCk7XG4gICAgdmlkZW9zLmZvckVhY2goKHYsIGkpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn46sIFske2kgKyAxfV0gJHt2LnVwbG9hZERhdGV9IOKAlCAke3YudXJsfWApO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXJuYW1lOiB1c2VybmFtZVRleHQsXG4gICAgICBhdmF0YXIsXG4gICAgICB0b3RhbDogdmlkZW9zLmxlbmd0aCxcbiAgICAgIGVzdFNpemU6IGAke3ZpZGVvcy5sZW5ndGggKiA1fSBNQmAsXG4gICAgICB2aWRlb3MsXG4gICAgfTtcblxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBhd2FpdCBicm93c2VyLmNsb3NlKCk7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFNjcmFwZXIgZXJyb3I6JywgZXJyLm1lc3NhZ2UpO1xuICAgIHRocm93IG5ldyBFcnJvcignR2FnYWwgbWVuZ2FtYmlsIGRhdGEgZGFyaSBUaWtUb2snKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgc2NyYXBlVGlrdG9rUHJvZmlsZSB9O1xuIl0sIm5hbWVzIjpbImNocm9taXVtIiwicmVxdWlyZSIsImZzIiwic2NyYXBlVGlrdG9rUHJvZmlsZSIsInVzZXJuYW1lIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImJyb3dzZXIiLCJsYXVuY2giLCJoZWFkbGVzcyIsImNvbnRleHQiLCJuZXdDb250ZXh0IiwiZXhpc3RzU3luYyIsImNvb2tpZXMiLCJKU09OIiwicGFyc2UiLCJyZWFkRmlsZVN5bmMiLCJhZGRDb29raWVzIiwiY29uc29sZSIsImxvZyIsInBhZ2UiLCJuZXdQYWdlIiwicHJvZmlsZVVybCIsImdvdG8iLCJ3YWl0VW50aWwiLCJ3YWl0Rm9yU2VsZWN0b3IiLCJ1c2VybmFtZVRleHQiLCIkZXZhbCIsImVsIiwiaW5uZXJUZXh0IiwiYXZhdGFyIiwiaW1nIiwic3JjIiwidmlkZW9MaW5rcyIsIlNldCIsInByZXZIZWlnaHQiLCJsaW5rcyIsIiQkZXZhbCIsImFzIiwibWFwIiwiYSIsImhyZWYiLCJmb3JFYWNoIiwibGluayIsImFkZCIsImhlaWdodCIsImV2YWx1YXRlIiwid2luZG93Iiwic2Nyb2xsVG8iLCJkb2N1bWVudCIsImJvZHkiLCJzY3JvbGxIZWlnaHQiLCJ3YWl0Rm9yVGltZW91dCIsInN0YXJ0IiwiRGF0ZSIsImdldFRpbWUiLCJlbmQiLCJ2aWRlb3MiLCJzaXplIiwidmlkIiwianNvbkRhdGEiLCJzY3JpcHQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZmluZCIsInMiLCJ0ZXh0Q29udGVudCIsImluY2x1ZGVzIiwibWF0Y2giLCJkYXRhIiwiU0VPU3RhdGUiLCJpdGVtTGlzdCIsImNyZWF0ZVRpbWUiLCJ3YXJuIiwiY2xvc2UiLCJ0aW1lIiwicHVzaCIsInVybCIsInVwbG9hZERhdGUiLCJ0b0lTT1N0cmluZyIsImRlc2NyaXB0aW9uIiwiZGVzYyIsInRodW1ibmFpbCIsImNvdmVyIiwiZXJyIiwibWVzc2FnZSIsImxlbmd0aCIsInYiLCJpIiwidG90YWwiLCJlc3RTaXplIiwiZXJyb3IiLCJFcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/scrapeTiktok.js\n");

/***/ }),

/***/ "(api)/./pages/api/preview.js":
/*!******************************!*\
  !*** ./pages/api/preview.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\nconst { scrapeTiktokProfile } = __webpack_require__(/*! @/lib/scrapeTiktok */ \"(api)/./lib/scrapeTiktok.js\");\nasync function handler(req, res) {\n    const { url, startDate, endDate } = req.query;\n    if (!url || !startDate || !endDate) {\n        return res.status(400).json({\n            error: \"Semua parameter (url, startDate, endDate) wajib diisi!\"\n        });\n    }\n    const match = url.match(/tiktok\\.com\\/@([\\w.-]+)/);\n    if (!match) {\n        return res.status(400).json({\n            error: \"Link TikTok tidak valid! Format harus seperti https://www.tiktok.com/@username\"\n        });\n    }\n    const username = match[1];\n    console.log(\"\\uD83D\\uDCE5 Request received with params:\", {\n        url,\n        startDate,\n        endDate\n    });\n    console.log(\"\\uD83D\\uDD0D Username extracted:\", username);\n    try {\n        const data = await scrapeTiktokProfile(username, startDate, endDate);\n        console.log(\"✅ Data berhasil diambil:\", {\n            username: data.username,\n            total: data.total,\n            estSize: data.estSize\n        });\n        res.status(200).json(data);\n    } catch (err) {\n        console.error(\"❌ Scraper error:\", err.message);\n        res.status(500).json({\n            error: \"Gagal fetch data dari TikTok, coba beberapa saat lagi\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcHJldmlldy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTSxFQUFFQSxtQkFBbUIsRUFBRSxHQUFHQyxtQkFBT0EsQ0FBQztBQUV6QixlQUFlQyxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsTUFBTSxFQUFFQyxHQUFHLEVBQUVDLFNBQVMsRUFBRUMsT0FBTyxFQUFFLEdBQUdKLElBQUlLLEtBQUs7SUFFN0MsSUFBSSxDQUFDSCxPQUFPLENBQUNDLGFBQWEsQ0FBQ0MsU0FBUztRQUNsQyxPQUFPSCxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBeUQ7SUFDaEc7SUFFQSxNQUFNQyxRQUFRUCxJQUFJTyxLQUFLLENBQUM7SUFDeEIsSUFBSSxDQUFDQSxPQUFPO1FBQ1YsT0FBT1IsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQWlGO0lBQ3hIO0lBRUEsTUFBTUUsV0FBV0QsS0FBSyxDQUFDLEVBQUU7SUFDekJFLFFBQVFDLEdBQUcsQ0FBQyw4Q0FBb0M7UUFBRVY7UUFBS0M7UUFBV0M7SUFBUTtJQUMxRU8sUUFBUUMsR0FBRyxDQUFDLG9DQUEwQkY7SUFFdEMsSUFBSTtRQUNGLE1BQU1HLE9BQU8sTUFBTWhCLG9CQUFvQmEsVUFBVVAsV0FBV0M7UUFDNURPLFFBQVFDLEdBQUcsQ0FBQyw0QkFBNEI7WUFDdENGLFVBQVVHLEtBQUtILFFBQVE7WUFDdkJJLE9BQU9ELEtBQUtDLEtBQUs7WUFDakJDLFNBQVNGLEtBQUtFLE9BQU87UUFDdkI7UUFDQWQsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ007SUFDdkIsRUFBRSxPQUFPRyxLQUFLO1FBQ1pMLFFBQVFILEtBQUssQ0FBQyxvQkFBb0JRLElBQUlDLE9BQU87UUFDN0NoQixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0Q7SUFDeEY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NzdHVkaW8td2ViLy4vcGFnZXMvYXBpL3ByZXZpZXcuanM/ODgzOSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHNjcmFwZVRpa3Rva1Byb2ZpbGUgfSA9IHJlcXVpcmUoJ0AvbGliL3NjcmFwZVRpa3RvaycpO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHsgdXJsLCBzdGFydERhdGUsIGVuZERhdGUgfSA9IHJlcS5xdWVyeTtcblxuICBpZiAoIXVybCB8fCAhc3RhcnREYXRlIHx8ICFlbmREYXRlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdTZW11YSBwYXJhbWV0ZXIgKHVybCwgc3RhcnREYXRlLCBlbmREYXRlKSB3YWppYiBkaWlzaSEnIH0pO1xuICB9XG5cbiAgY29uc3QgbWF0Y2ggPSB1cmwubWF0Y2goL3Rpa3Rva1xcLmNvbVxcL0AoW1xcdy4tXSspLyk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0xpbmsgVGlrVG9rIHRpZGFrIHZhbGlkISBGb3JtYXQgaGFydXMgc2VwZXJ0aSBodHRwczovL3d3dy50aWt0b2suY29tL0B1c2VybmFtZScgfSk7XG4gIH1cblxuICBjb25zdCB1c2VybmFtZSA9IG1hdGNoWzFdO1xuICBjb25zb2xlLmxvZygn8J+TpSBSZXF1ZXN0IHJlY2VpdmVkIHdpdGggcGFyYW1zOicsIHsgdXJsLCBzdGFydERhdGUsIGVuZERhdGUgfSk7XG4gIGNvbnNvbGUubG9nKCfwn5SNIFVzZXJuYW1lIGV4dHJhY3RlZDonLCB1c2VybmFtZSk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc2NyYXBlVGlrdG9rUHJvZmlsZSh1c2VybmFtZSwgc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIERhdGEgYmVyaGFzaWwgZGlhbWJpbDonLCB7XG4gICAgICB1c2VybmFtZTogZGF0YS51c2VybmFtZSxcbiAgICAgIHRvdGFsOiBkYXRhLnRvdGFsLFxuICAgICAgZXN0U2l6ZTogZGF0YS5lc3RTaXplLFxuICAgIH0pO1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGRhdGEpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgU2NyYXBlciBlcnJvcjonLCBlcnIubWVzc2FnZSk7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0dhZ2FsIGZldGNoIGRhdGEgZGFyaSBUaWtUb2ssIGNvYmEgYmViZXJhcGEgc2FhdCBsYWdpJyB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInNjcmFwZVRpa3Rva1Byb2ZpbGUiLCJyZXF1aXJlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsInVybCIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJxdWVyeSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm1hdGNoIiwidXNlcm5hbWUiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsInRvdGFsIiwiZXN0U2l6ZSIsImVyciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/preview.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpreview&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpreview.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();